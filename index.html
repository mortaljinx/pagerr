<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Pagerr v2 – JSON Fix Build</title>
</head>
<body>

<!--
This build includes:

1) Export button is neutral (no default accent class)
   Correct version:
   <button class="data-btn" onclick="exportConfig()">

2) Updated exportConfig() function (see below)
-->

<script>

function exportConfig() {
  var payload = {
    version: 2,
    exportedAt: Date.now(),
    state: state
  };

  var json = JSON.stringify(payload, null, 2);
  var blob = new Blob([json], { type: 'application/json' });
  var url = URL.createObjectURL(blob);

  var a = document.createElement('a');
  a.href = url;
  a.download = 'pagerr-config.json';
  a.style.display = 'none';
  a.tabIndex = -1;
  a.setAttribute('aria-hidden', 'true';
  document.body.appendChild(a);

  a.click();

  setTimeout(function () {
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    if (document.activeElement) document.activeElement.blur();
  }, 0);

  showToast('Config exported ✓');
  closeSettings();
}

</script>

<p>Replace your exportConfig() with the version above.</p>

</body>
</html>
